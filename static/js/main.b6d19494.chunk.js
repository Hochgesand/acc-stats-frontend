(this["webpackJsonpacc-frontend"]=this["webpackJsonpacc-frontend"]||[]).push([[0],{17:function(e,t,s){},28:function(e,t,s){},36:function(e,t,s){"use strict";s.r(t);var a=s(1),r=s.n(a),n=s(19),c=s.n(n),i=s(20),d=s(5),o=(s(17),s(28),s(2)),l=s.n(o),j=s(4),b=s(3);function u(e){var t=e.path;return{getData:function(){return fetch(t,{method:"get",headers:void 0}).then(function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}throw Error("Could not fetch data");case 2:return e.abrupt("return",t.json());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}var p=s(0);function h(){return Object(p.jsx)("button",{className:"btn btn-lg loading",children:"loading"})}function m(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),s=t[0],r=t[1],n=Object(a.useState)(!0),c=Object(b.a)(n,2),i=c[0],d=c[1],o=u({path:"https://acc-api.aptinstall.de/tracks/times"}).getData;return Object(a.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().then((function(e){r(e),d(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),i?Object(p.jsx)(h,{}):Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"col-span-1 h-10 card bg-base-300 rounded-box place-items-center",children:Object(p.jsx)("h1",{className:"align-middle m-auto",children:"Track scoreboard"})}),Object(p.jsx)("div",{className:"overflow-x-auto mt-2",children:Object(p.jsxs)("table",{className:"table w-full",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{}),Object(p.jsx)("th",{children:"Track"}),Object(p.jsx)("th",{children:"Best laptime"}),Object(p.jsx)("th",{children:"player"})]})}),Object(p.jsx)("tbody",{children:s.map((function(e){return Object(p.jsx)(x,{avgLapTime:e.avgLapTime,avgLapTimeFormatted:e.avgLapTimeFormatted,bestLapTime:e.bestLapTime,bestLapTimeFormatted:e.bestLapTimeFormatted,bestTimedriverId:e.bestTimedriverId,trackName:e.trackName,bestTimeSessionId:e.bestTimeSessionId})}))})]})})]})}function x(e){var t=Object(a.useState)({}),s=Object(b.a)(t,2),r=s[0],n=s[1],c=Object(a.useState)(!0),i=Object(b.a)(c,2),d=i[0],o=i[1],m=u({path:"https://acc-api.aptinstall.de/driver/".concat(e.bestTimedriverId)}).getData;return Object(a.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m().then((function(e){n(e),o(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),d?Object(p.jsx)("td",{children:Object(p.jsx)(h,{})}):Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:Object(p.jsx)("a",{href:"/session/"+e.bestTimeSessionId,children:Object(p.jsx)("button",{className:"btn",children:"Go To Session"})})}),Object(p.jsx)("td",{children:e.trackName}),Object(p.jsx)("td",{children:e.bestLapTimeFormatted}),Object(p.jsx)("td",{children:r.shortName+" - "+r.firstName+" "+r.lastName})]})}var O="https://acc-api.aptinstall.de",f="".concat(O,"/sessions"),v="".concat(O,"/session");function N(e){return g.apply(this,arguments)}function g(){return g=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t,{method:"get",headers:void 0}).then(function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}throw Error("Could not fetch data");case 2:return e.abrupt("return",t.json());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}var w={getSessions:function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("".concat(f));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getSession:function(){var e=Object(j.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],e.t0=s,e.next=4,N("".concat(v,"/").concat(t));case 4:return e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTimesOfDriverById:function(){var e=Object(j.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("".concat(O,"/driver/").concat(t,"/times"));case 2:return s=e.sent,console.log(s),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCarModels:function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.t0=Object,e.next=4,N("".concat(O,"/car/models"));case 4:return e.t1=e.sent,e.t0.entries.call(e.t0,e.t1).map((function(e){var s=Object(b.a)(e,2),a=s[0],r=s[1];t.push({id:a,name:r})})),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getSpecificCarByCarId:function(){var e=Object(j.a)(l.a.mark((function e(t){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],e.t0=s,e.next=4,N("".concat(O,"/car/").concat(t));case 4:return e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},T=w;function L(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];var n=Object(a.useState)([]),c=Object(b.a)(n,2),i=c[0],d=c[1],o=Object(a.useState)(!0),u=Object(b.a)(o,2),p=u[0],h=u[1],m=Object(a.useState)(""),x=Object(b.a)(m,2),O=x[0],f=x[1],v=function(){var t=Object(j.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(""),t.prev=1,h(!0),t.next=5,T[e].apply(T,s);case 5:a=t.sent,d(a),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),f(t.t0.message);case 12:return t.prev=12,h(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){v()}),[]),{data:i,isLoading:p,error:O,fetchData:v}}function k(){var e=L("getSessions");return e.isLoading?Object(p.jsx)(h,{}):Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"col-span-1 h-10 card bg-base-300 rounded-box place-items-center mr-2",children:Object(p.jsx)("h1",{className:"align-middle m-auto",children:"All sessions"})}),Object(p.jsx)("div",{className:"overflow-x-auto mt-2 mr-2",children:Object(p.jsxs)("table",{className:"table w-full",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{}),Object(p.jsx)("th",{children:"Session"}),Object(p.jsx)("th",{children:"Session type"}),Object(p.jsx)("th",{children:"Date"})]})}),Object(p.jsx)("tbody",{children:e.data.map((function(e){return Object(p.jsx)(y,{created_at:e.created_at,id:e.id,metaData:e.metaData,raceWeekendIndex:e.raceWeekendIndex,serverName:e.serverName,sessionIndex:e.sessionIndex,sessionType:e.sessionType,trackName:e.trackName,updated_at:e.updated_at,bestLapTimeFormatted:e.bestLapTimeFormatted,bestLapTime:e.bestLapTime,bestDriver:e.bestDriver})}))})]})})]})}function y(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:Object(p.jsx)("a",{href:"/session/"+e.id,children:Object(p.jsx)("button",{className:"btn",children:"Go To Session"})})}),Object(p.jsx)("td",{children:e.trackName}),Object(p.jsx)("td",{children:e.sessionType}),Object(p.jsx)("td",{children:e.created_at})]})}function F(e){return Object(p.jsx)("div",{className:"alert alert-error m-4",children:Object(p.jsxs)("div",{className:"flex-1",children:[Object(p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-6 h-6 mx-2 stroke-current",children:Object(p.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),Object(p.jsx)("label",{children:e.msg})]})})}var S=s(23);function I(){var e=Object(a.useState)(!0),t=Object(b.a)(e,2),s=t[0],r=t[1],n=Object(a.useState)(""),c=Object(b.a)(n,2),i=c[0],d=c[1],o=Object(a.useState)({}),m=Object(b.a)(o,2),x=m[0],f=m[1],v=Object(a.useState)([]),N=Object(b.a)(v,2),g=N[0],w=N[1],T=u({path:"".concat(O,"/stats")}),L=u({path:"".concat(O,"/drivers")}),k={labels:["invalid laps","valid laps"],datasets:[{label:"LapsData",data:[x.totalInvalidLaps,x.totalValidLaps],backgroundColor:["rgb(255,0,0)","rgb(48,255,0)"],hoverOffset:0}]};return Object(a.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getData().then((function(e){f(e),r(!1)})).catch((function(e){d(e.message),r(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getData().then((function(e){w(e),r(!1)})).catch((function(e){d(e.message),r(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}(),function(){e.apply(this,arguments)}()}),[]),s?Object(p.jsx)(h,{}):i.length>0?Object(p.jsx)(F,{msg:i}):Object(p.jsxs)("div",{className:"w-100 grid grid-rows-1 grid-cols-2 gap-4",children:[Object(p.jsx)("div",{className:"h-auto text-white mb-3 bg-base-300 p-4 rounded-box w-full",children:Object(p.jsx)(S.a,{data:k,options:{responsive:!0,color:"red"}})}),Object(p.jsxs)("div",{className:"h-1/12 text-white mb-3 bg-base-300 p-4 rounded-box w-full",children:[Object(p.jsx)("p",{className:"text-3xl",children:"All Drivers"}),g.map((function(e){return Object(p.jsxs)("div",{className:"flex flex-row",children:[Object(p.jsxs)("p",{children:[e.shortName," ",e.firstName," ",e.lastName]}),Object(p.jsx)("a",{href:"/driver/"+e.id,children:Object(p.jsx)("button",{className:"btn",children:"Go To Driver"})})]})}))]})]})}function D(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"alert mb-2",children:Object(p.jsxs)("div",{className:"flex-1",children:[Object(p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"#2196f3",className:"w-6 h-6 mx-2",children:Object(p.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Object(p.jsx)("label",{children:"This website is sill under development. Errors may occur and some features could appear to be missing. This is indeed in a pre-alpha state. But anyway, visit our Teamspeak @ ts.germandeathsystem.de"})]})}),Object(p.jsxs)("div",{className:"grid grid-cols-2",children:[Object(p.jsx)(k,{}),Object(p.jsx)(m,{})]}),Object(p.jsx)(I,{})]})}var _=function(){return Object(p.jsx)("div",{className:"lander w-full h-full rounded-md px-4 py-4",children:Object(p.jsx)("h2",{children:Object(p.jsx)(D,{})})})},E=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,37)).then((function(t){var s=t.getCLS,a=t.getFID,r=t.getFCP,n=t.getLCP,c=t.getTTFB;s(e),a(e),r(e),n(e),c(e)}))};function B(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"h-10 w-11/12 card bg-base-200 rounded-box place-items-center w-auto m-2 p-2",children:Object(p.jsx)("h2",{children:"Sessioninformation"})}),Object(p.jsx)("div",{className:"h-10 w-11/12 card bg-base-200 rounded-box place-items-center m-2 p-2",children:e.created_at}),Object(p.jsx)("div",{className:"h-10 card w-11/12 bg-base-200 rounded-box place-items-center m-2 p-2",children:e.trackName}),Object(p.jsx)("div",{className:"h-auto card w-11/12 bg-base-200 rounded-box place-items-center m-2 p-2",children:e.serverName}),Object(p.jsxs)("div",{className:"h-auto card w-11/12 bg-base-200 rounded-box place-items-center m-2 p-2",children:["Best Laptime overall: ",e.bestLapTimeFormatted," | ",e.bestDriver.substr(0,3)]})]})}function C(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:e.firstName}),Object(p.jsx)("td",{className:"content-end",children:e.lastName}),Object(p.jsx)("td",{children:e.shortName}),Object(p.jsx)("td",{children:e.bestLapTime}),Object(p.jsx)("td",{children:Object(p.jsx)("a",{href:"/driver/"+e.id,children:Object(p.jsx)("button",{className:"btn",children:"Go To Driver"})})})]})}function A(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:e.id}),Object(p.jsx)("td",{children:e.driverName}),Object(p.jsx)("td",{children:e.lapTimeFormatted}),Object(p.jsx)("td",{children:e.split1Formatted}),Object(p.jsx)("td",{children:e.split2Formatted}),Object(p.jsx)("td",{children:e.split3Formatted}),Object(p.jsx)(M,{num:e.isValidForBest})]})}function M(e){return 1===e.num?Object(p.jsx)("td",{children:"Yes"}):Object(p.jsx)("td",{children:"No"})}function V(e){var t,s=Object(a.useState)([]),r=Object(b.a)(s,2),n=r[0],c=r[1],i=Object(a.useState)(!0),d=Object(b.a)(i,2),o=d[0],m=d[1],x=Object(a.useState)(""),O=Object(b.a)(x,2),f=O[0],N=O[1],g=u({path:"".concat(v,"/").concat(null===(t=e.session)||void 0===t?void 0:t.id,"/laps")}).getData;return Object(a.useEffect)((function(){function t(){return(t=Object(j.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g().then((function(t){t.forEach((function(t){var s;null===(s=e.drivers)||void 0===s||s.forEach((function(e){e.id===t.driverId&&(t.driverName=e.shortName)}))})),c(t),m(!1)})).catch((function(e){N(e.message),m(!1)}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),o?Object(p.jsx)(h,{}):f.length>0?Object(p.jsx)(F,{msg:f}):Object(p.jsx)("div",{className:"overflow-x-auto mt-5 col-span-4 bg-base-300 p-4 rounded-box w-6/12",children:Object(p.jsxs)("table",{className:"table",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"id"}),Object(p.jsx)("th",{children:"Name"}),Object(p.jsx)("th",{children:"Laptime"}),Object(p.jsx)("th",{children:"Split 1"}),Object(p.jsx)("th",{children:"Split 2"}),Object(p.jsx)("th",{children:"Split 3"}),Object(p.jsx)("th",{children:"Valid"})]})}),Object(p.jsx)("tbody",{children:n.map((function(e){return Object(p.jsx)(A,{carId:e.carId,created_at:e.created_at,driverId:e.driverId,id:e.id,isValidForBest:e.isValidForBest,lapTime:e.lapTime,lapTimeFormatted:e.lapTimeFormatted,sessionId:e.sessionId,split1:e.split1,split1Formatted:e.split1Formatted,split2:e.split2,split2Formatted:e.split2Formatted,split3:e.split3,split3Formatted:e.split3Formatted,updated_at:e.updated_at,driverName:e.driverName,fastestLap:e.fastestLap})}))})]})})}function G(e){var t=e.id,s=Object(a.useState)({session:{},cars:[],laps:[],drivers:[]}),r=Object(b.a)(s,2),n=r[0],c=r[1],i=L("getSession",t);return Object(a.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,s,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.data[0],i.isLoading||(null===(s=t.drivers)||void 0===s||s.forEach((function(e){var s;e.bestLapTimeNum=Number.MAX_VALUE,t.session.bestLapTime=Number.MAX_VALUE,null===(s=t.laps)||void 0===s||s.forEach((function(s){e.id===s.driverId&&s.lapTime<e.bestLapTimeNum&&(e.bestLapTimeNum=s.lapTime,e.bestLapTime=s.lapTimeFormatted),s.lapTime<t.session.bestLapTime&&(t.session.bestLapTimeFormatted=s.lapTimeFormatted,t.session.bestLapTime=s.lapTime,t.session.bestDriver=e.shortName+e.firstName+e.lastName)}))})),null===(a=t.laps)||void 0===a||a.forEach((function(e){e.lapTime===t.session.bestLapTime&&(e.fastestLap=!0)})),c(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i.isLoading]),i.isLoading?Object(p.jsx)(h,{}):i.error.length>0?Object(p.jsx)(F,{msg:i.error}):null!=n.session&&null!=n.drivers&&n.drivers.length>0?Object(p.jsxs)("div",{className:"p-5",children:[Object(p.jsxs)("div",{className:"flex flex-row w-full",children:[Object(p.jsx)("div",{className:"grid h-auto card bg-base-300 rounded-box place-items-center mb-3 p-2",children:Object(p.jsx)(B,{created_at:n.session.created_at,id:n.session.id,metaData:n.session.metaData,raceWeekendIndex:n.session.raceWeekendIndex,serverName:n.session.serverName,sessionIndex:n.session.sessionIndex,sessionType:n.session.sessionType,trackName:n.session.trackName,updated_at:n.session.updated_at,bestLapTime:n.session.bestLapTime,bestLapTimeFormatted:n.session.bestLapTimeFormatted,bestDriver:n.session.bestDriver})}),Object(p.jsx)("div",{className:"overflow-x-auto mb-3 ml-5 col-span-4 bg-base-300 p-4 rounded-box w-5/12",children:Object(p.jsxs)("table",{className:"table-zebra table w-full",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Driver"}),Object(p.jsx)("th",{children:"Name"}),Object(p.jsx)("th",{children:"Shortname"}),Object(p.jsx)("th",{children:"Best lap time"}),Object(p.jsx)("th",{})]})}),Object(p.jsx)("tbody",{children:n.drivers.map((function(e){return Object(p.jsx)(C,{created_at:e.created_at,firstName:e.firstName,id:e.id,lastName:e.lastName,playerId:e.playerId,shortName:e.shortName,updated_at:e.updated_at,bestLapTime:e.bestLapTime,bestLapTimeNum:e.bestLapTimeNum})}))})]})})]}),Object(p.jsx)(V,{session:n.session,cars:n.cars,drivers:n.drivers})]}):Object(p.jsx)("div",{})}function W(e){var t=L("getSpecificCarByCarId",e.id);return t.isLoading?Object(p.jsx)(h,{}):Object(p.jsx)(p.Fragment,{children:void 0===t.data[0]?"error":t.data[0].carName})}function z(e){var t=L("getTimesOfDriverById",e.id);return t.isLoading?Object(p.jsx)(h,{}):t.error.length>0?Object(p.jsx)(F,{msg:t.error}):Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{children:t.data.map((function(e){return Object(p.jsxs)("div",{className:"relative h-auto text-white mb-3 col-span-4 bg-base-300 p-4 rounded-box w-4/12",children:[Object(p.jsx)("p",{children:e.trackName}),Object(p.jsx)("p",{children:e.bestLapTimeFormatted}),Object(p.jsx)(W,{id:e.bestTimeCarId})]})}))})})}c.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(i.a,{children:Object(p.jsxs)(d.c,{children:[Object(p.jsx)(d.a,{exact:!0,path:"/session/:id",render:function(e){return Object(p.jsx)(G,{id:e.match.params.id})}}),Object(p.jsx)(d.a,{exact:!0,path:"/driver/:id",render:function(e){return Object(p.jsx)(z,{id:e.match.params.id})}}),Object(p.jsx)(d.a,{path:"/",children:Object(p.jsx)(_,{})})]})})}),document.getElementById("root")),E()}},[[36,1,2]]]);
//# sourceMappingURL=main.b6d19494.chunk.js.map