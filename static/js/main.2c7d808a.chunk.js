(this["webpackJsonpacc-frontend"]=this["webpackJsonpacc-frontend"]||[]).push([[0],{15:function(e,t,s){},25:function(e,t,s){},33:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),r=s(17),n=s.n(r),i=s(18),d=s(2),o=(s(15),s(25),s(4)),j=s.n(o),l=s(9),b=s(5);function m(e){var t=e.path;return{getData:function(){return fetch(t,{method:"get",headers:void 0}).then(function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}throw Error("Could not fetch data");case 2:return e.abrupt("return",t.json());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}var h=s(0);function u(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:Object(h.jsx)("a",{href:"/session/"+e.id,children:Object(h.jsx)("button",{className:"btn",children:"Go To Session"})})}),Object(h.jsx)("td",{children:e.trackName}),Object(h.jsx)("td",{children:e.sessionType}),Object(h.jsx)("td",{children:e.created_at})]})}var p="https://acc-api.aptinstall.de",x="".concat(p,"/sessions"),O="".concat(p,"/session");function f(){return Object(h.jsx)("button",{className:"btn btn-lg loading",children:"loading"})}function v(e){var t=Object(a.useState)({}),s=Object(b.a)(t,2),c=s[0],r=s[1],n=Object(a.useState)(!0),i=Object(b.a)(n,2),d=i[0],o=i[1],u=m({path:"https://acc-api.aptinstall.de/driver/".concat(e.bestTimedriverId)}).getData;return Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().then((function(e){r(e),o(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),d?Object(h.jsx)("td",{children:Object(h.jsx)(f,{})}):Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:Object(h.jsx)("a",{href:"/session/"+e.bestTimeSessionId,children:Object(h.jsx)("button",{className:"btn",children:"Go To Session"})})}),Object(h.jsx)("td",{children:e.trackName}),Object(h.jsx)("td",{children:e.avgLapTimeFormatted}),Object(h.jsx)("td",{children:e.bestLapTimeFormatted}),Object(h.jsx)("td",{children:c.shortName+" - "+c.firstName+" "+c.lastName})]})}function N(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),s=t[0],c=t[1],r=Object(a.useState)(!0),n=Object(b.a)(r,2),i=n[0],d=n[1],o=m({path:"https://acc-api.aptinstall.de/tracks/times"}).getData;return Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().then((function(e){c(e),d(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),i?Object(h.jsx)(f,{}):Object(h.jsx)("div",{className:"overflow-x-auto mt-2",children:Object(h.jsxs)("table",{className:"table w-full",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{}),Object(h.jsx)("th",{children:"Track"}),Object(h.jsx)("th",{children:"avg laptime of all laps"}),Object(h.jsx)("th",{children:"Best laptime..."}),Object(h.jsx)("th",{children:"...of player"})]})}),Object(h.jsx)("tbody",{children:s.map((function(e){return Object(h.jsx)(v,{avgLapTime:e.avgLapTime,avgLapTimeFormatted:e.avgLapTimeFormatted,bestLapTime:e.bestLapTime,bestLapTimeFormatted:e.bestLapTimeFormatted,bestTimedriverId:e.bestTimedriverId,trackName:e.trackName,bestTimeSessionId:e.bestTimeSessionId})}))})]})})}function T(){var e=Object(a.useState)([{}]),t=Object(b.a)(e,2),s=t[0],c=t[1],r=Object(a.useState)(!0),n=Object(b.a)(r,2),i=n[0],d=n[1],o=m({path:"".concat(x)}).getData;return Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().then((function(e){c(e),d(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),i?Object(h.jsx)(f,{}):Object(h.jsxs)("div",{className:"grid grid-cols-2",children:[Object(h.jsx)("div",{className:"col-span-1 h-10 card bg-base-300 rounded-box place-items-center mr-2",children:Object(h.jsx)("h1",{className:"align-middle m-auto",children:"All sessions"})}),Object(h.jsx)("div",{className:"col-span-1 h-10 card bg-base-300 rounded-box place-items-center",children:Object(h.jsx)("h1",{className:"align-middle m-auto",children:"Track scoreboard"})}),Object(h.jsx)("div",{className:"overflow-x-auto mt-2 mr-2",children:Object(h.jsxs)("table",{className:"table w-full",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{}),Object(h.jsx)("th",{children:"Session"}),Object(h.jsx)("th",{children:"Session type"}),Object(h.jsx)("th",{children:"Date"})]})}),Object(h.jsx)("tbody",{children:s.map((function(e){return Object(h.jsx)(u,{created_at:e.created_at,id:e.id,metaData:e.metaData,raceWeekendIndex:e.raceWeekendIndex,serverName:e.serverName,sessionIndex:e.sessionIndex,sessionType:e.sessionType,trackName:e.trackName,updated_at:e.updated_at,bestLapTimeFormatted:e.bestLapTimeFormatted,bestLapTime:e.bestLapTime,bestDriver:e.bestDriver})}))})]})}),Object(h.jsx)(N,{})]})}var g=function(){return Object(h.jsx)("div",{className:"lander w-full h-full rounded-md px-4 py-4",children:Object(h.jsx)("h2",{children:Object(h.jsx)(T,{})})})},L=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,34)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,n=t.getTTFB;s(e),a(e),c(e),r(e),n(e)}))};function w(e){return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"h-10 w-11/12 card bg-base-200 rounded-box place-items-center w-auto m-2 p-2",children:Object(h.jsx)("h2",{children:"Sessioninformation"})}),Object(h.jsx)("div",{className:"h-10 w-11/12 card bg-base-200 rounded-box place-items-center m-2 p-2",children:e.id}),Object(h.jsx)("div",{className:"h-10 card w-11/12 bg-base-200 rounded-box place-items-center m-2 p-2",children:e.trackName}),Object(h.jsx)("div",{className:"h-auto card w-11/12 bg-base-200 rounded-box place-items-center m-2 p-2",children:e.serverName}),Object(h.jsxs)("div",{className:"h-auto card w-11/12 bg-base-200 rounded-box place-items-center m-2 p-2",children:["Best Laptime overall: ",e.bestLapTimeFormatted]})]})}function F(e){return Object(h.jsx)("div",{className:"alert alert-error m-4",children:Object(h.jsxs)("div",{className:"flex-1",children:[Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-6 h-6 mx-2 stroke-current",children:Object(h.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),Object(h.jsx)("label",{children:e.msg})]})})}function k(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.firstName}),Object(h.jsx)("td",{className:"content-end",children:e.lastName}),Object(h.jsx)("td",{children:e.shortName}),Object(h.jsx)("td",{children:e.bestLapTime})]})}function y(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.id}),Object(h.jsx)("td",{children:e.driverName}),Object(h.jsx)("td",{children:e.lapTimeFormatted}),Object(h.jsx)("td",{children:e.split1Formatted}),Object(h.jsx)("td",{children:e.split2Formatted}),Object(h.jsx)("td",{children:e.split3Formatted}),Object(h.jsx)(I,{num:e.isValidForBest})]})}function I(e){return 1===e.num?Object(h.jsx)("td",{children:"Yes"}):Object(h.jsx)("td",{children:"No"})}function S(e){var t,s=Object(a.useState)([]),c=Object(b.a)(s,2),r=c[0],n=c[1],i=Object(a.useState)(!0),d=Object(b.a)(i,2),o=d[0],u=d[1],p=Object(a.useState)(""),x=Object(b.a)(p,2),v=x[0],N=x[1],T=m({path:"".concat(O,"/").concat(null===(t=e.session)||void 0===t?void 0:t.id,"/laps")}).getData;return Object(a.useEffect)((function(){function t(){return(t=Object(l.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T().then((function(t){t.forEach((function(t){var s;null===(s=e.drivers)||void 0===s||s.forEach((function(e){e.id===t.driverId&&(t.driverName=e.shortName)}))})),n(t),u(!1)})).catch((function(e){N(e.message),u(!1)}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),o?Object(h.jsx)(f,{}):v.length>0?Object(h.jsx)(F,{msg:v}):Object(h.jsx)("div",{className:"overflow-x-auto mt-5 col-span-4 bg-base-300 p-4 rounded-box w-6/12",children:Object(h.jsxs)("table",{className:"table",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"id"}),Object(h.jsx)("th",{children:"Name"}),Object(h.jsx)("th",{children:"Laptime"}),Object(h.jsx)("th",{children:"Split 1"}),Object(h.jsx)("th",{children:"Split 2"}),Object(h.jsx)("th",{children:"Split 3"}),Object(h.jsx)("th",{children:"Valid"})]})}),Object(h.jsx)("tbody",{children:r.map((function(e){return Object(h.jsx)(y,{carId:e.carId,created_at:e.created_at,driverId:e.driverId,id:e.id,isValidForBest:e.isValidForBest,lapTime:e.lapTime,lapTimeFormatted:e.lapTimeFormatted,sessionId:e.sessionId,split1:e.split1,split1Formatted:e.split1Formatted,split2:e.split2,split2Formatted:e.split2Formatted,split3:e.split3,split3Formatted:e.split3Formatted,updated_at:e.updated_at,driverName:e.driverName,fastestLap:e.fastestLap})}))})]})})}function _(e){var t=e.id,s=Object(a.useState)({session:{},cars:[],laps:[],drivers:[]}),c=Object(b.a)(s,2),r=c[0],n=c[1],i=Object(a.useState)(!0),d=Object(b.a)(i,2),o=d[0],u=d[1],p=Object(a.useState)(""),x=Object(b.a)(p,2),v=x[0],N=x[1],T=m({path:"".concat(O,"/").concat(t)}).getData;return Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T().then((function(e){var t,s=e;null===(t=s.drivers)||void 0===t||t.forEach((function(e){var t;e.bestLapTimeNum=Number.MAX_VALUE,s.session.bestLapTime=Number.MAX_VALUE,null===(t=s.laps)||void 0===t||t.forEach((function(t){e.id===t.driverId&&t.lapTime<e.bestLapTimeNum&&(e.bestLapTimeNum=t.lapTime,e.bestLapTime=t.lapTimeFormatted,t.lapTime<s.session.bestLapTime&&(s.session.bestLapTimeFormatted=t.lapTimeFormatted,t.fastestLap=!0,s.session.bestDriver=e.shortName+e.firstName+e.lastName))}))})),n(s),u(!1)})).catch((function(e){N(e.message),u(!1)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),o?Object(h.jsx)(f,{}):v.length>0?Object(h.jsx)(F,{msg:v}):null!=r.session&&null!=r.drivers?Object(h.jsxs)("div",{className:"p-5",children:[Object(h.jsxs)("div",{className:"flex flex-row w-full",children:[Object(h.jsx)("div",{className:"grid h-auto card bg-base-300 rounded-box place-items-center mb-3 p-2",children:Object(h.jsx)(w,{created_at:r.session.created_at,id:r.session.id,metaData:r.session.metaData,raceWeekendIndex:r.session.raceWeekendIndex,serverName:r.session.serverName,sessionIndex:r.session.sessionIndex,sessionType:r.session.sessionType,trackName:r.session.trackName,updated_at:r.session.updated_at,bestLapTime:r.session.bestLapTime,bestLapTimeFormatted:r.session.bestLapTimeFormatted,bestDriver:r.session.bestDriver})}),Object(h.jsx)("div",{className:"overflow-x-auto mb-3 ml-5 col-span-4 bg-base-300 p-4 rounded-box w-5/12",children:Object(h.jsxs)("table",{className:"table-zebra table w-full",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Driver"}),Object(h.jsx)("th",{children:"Name"}),Object(h.jsx)("th",{children:"Shortname"}),Object(h.jsx)("th",{children:"Best lap time"})]})}),Object(h.jsx)("tbody",{children:r.drivers.map((function(e){return Object(h.jsx)(k,{created_at:e.created_at,firstName:e.firstName,id:e.id,lastName:e.lastName,playerId:e.playerId,shortName:e.shortName,updated_at:e.updated_at,bestLapTime:e.bestLapTime,bestLapTimeNum:e.bestLapTimeNum})}))})]})})]}),Object(h.jsx)(S,{session:r.session,cars:r.cars,drivers:r.drivers})]}):Object(h.jsx)("div",{})}n.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(i.a,{children:Object(h.jsxs)(d.c,{children:[Object(h.jsx)(d.a,{exact:!0,path:"/session/:id",render:function(e){return Object(h.jsx)(_,{id:e.match.params.id})}}),Object(h.jsx)(d.a,{path:"/",children:Object(h.jsx)(g,{})})]})})}),document.getElementById("root")),L()}},[[33,1,2]]]);
//# sourceMappingURL=main.2c7d808a.chunk.js.map